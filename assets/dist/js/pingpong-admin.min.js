var PingPong_Admin_MatchCPTs;!function(e){"use strict";var a={},t={};"undefined"!=typeof PingPong_Admin&&(a=PingPong_Admin,t="undefined"!=typeof PingPong_Admin.l10n?PingPong_Admin.l10n:{});var s=PingPong_Admin_MatchCPTs={$scores_modal:null,$games_input:null,scores:{players:{},teams:{},matches:[]},init:function(){s.get_elements(),s.setup_handlers(),s.initialize_match_type(),a.scores&&(s.scores=a.scores)},get_elements:function(){s.$scores_modal=e("#pingpong-scores-modal"),s.$games_input=e('select[name="_rbm_games"]'),s.$game_type_input=e('input[name="_rbm_type"]')},setup_handlers:function(){e(document).on("click",'#match-type .rbm-field-radio input[type="radio"]',s.match_type_select),e(document).on("click","[data-scores-close]",s.scores_modal_close),e(document).on("click","[data-scores-open]",s.scores_modal_add_scores),e(document).on("click","[data-scores-submit]",s.scores_modal_submit),e(document).on("change",'.pingpong-scores-table input[type="number"]',s.scores_update),e(document).on("click","body.post-type-match.pingpong-matches-complete .wp-list-table a.row-title,body.post-type-match.pingpong-matches-complete .wp-list-table .row-actions .edit a",s.scores_modal_preview)},initialize_match_type:function(){e('#match-type .rbm-field-radio input[type="radio"]:checked').click()},match_type_select:function(){var a=e(this).val(),t=e("#match-settings-"+a),s=e('[id^="match-settings-"]:not(#match-settings-'+a+")");t.length&&(t.show(),s.hide())},scores_modal_add_scores:function(){var a,t,o,n,r,l,d,i=s.$games_input.val(),p=s.$game_type_input.filter(":checked").val(),_=s.$scores_modal.find(".pingpong-scores-table"),c=(_.find("thead tr"),_.find("tbody"),0);switch(e("body").addClass("pingpong-modal-open"),c=parseInt(i),s.scores_modal_open(),p){case"singles":var m=[];if(a=e('select[name="_rbm_singles_players[]"]'),o=a.val()){for(d=0;d<o.length;d++)m.push({name:a.find('option[value="'+o[d]+'"]').html().trim(),id:o[d]});l=s.scores_modal_get_table_data("singles",m)}s.scores_modal_populate_table(c,l.rows,l.footer);break;case"doubles":var u=[];if(t=e('select[name="_rbm_doubles_teams[]"]'),n=t.val())for(d=0;d<n.length;d++)u.push({name:t.find('option[value="'+n[d]+'"]').html().trim(),id:n[d]});s.scores_modal_get_table_data("doubles",!1,u),s.scores_modal_populate_table(c,l.rows);break;case"team":if(t=e('select[name="_rbm_teams[]"]'),n=t.val()){for(s.$scores_modal.find(".pingpong-scores-container").addClass("loading"),r={},d=0;d<n.length;d++)r[n[d]]=t.find('option[value="'+n[d]+'"]').html().trim();e.post(ajaxurl,{action:"pingpong_get_team_players",team_IDs:n},function(e){var a=e.data;s.$scores_modal.find(".pingpong-scores-container").removeClass("loading"),"undefined"!=typeof e.success&&e.success&&(l=s.scores_modal_get_table_data("team",!1,a),s.scores_modal_populate_table(c,l.rows,l.footer))})}}},scores_modal_preview:function(a){var t=e(this).closest("tr").attr("id").match(/post-(\d+)/)[1];a.preventDefault(),e.post(ajaxurl,{action:"pingpong_get_match_scores",match_id:t},function(e){var a;if("undefined"!=typeof e.success&&e.success){switch(e.data.type){case"singles":a=s.scores_modal_get_table_data("singles",e.data.scores.players);break;case"doubles":break;case"team":a=s.scores_modal_get_table_data("team",!1,e.data.scores.teams)}s.scores_modal_populate_table(e.data.scores.matches[0].length,a.rows,a.footer),s.scores_modal_populate_scores(e.data.scores.matches),s.$scores_modal.find('input[type="number"]').prop("disabled",!0),s.scores_modal_open()}})},scores_modal_open:function(){s.$scores_modal.show()},scores_modal_get_table_data:function(e,a,t){var s,o=[],n=[];switch(e){case"singles":for(s=0;s<a.length;s++)o.push({label:a[s].name,player_id:a[s].id}),n.push({label:a[s].name,player_id:a[s].id});break;case"doubles":for(s=0;s<t.length;s++)o.push({label:t[s].name,team_id:t[s].id});break;case"team":o.push({label:"<strong>"+t[0].name+":</strong> "+t[0].players[0].name,team_id:t[0].id,player_id:t[0].players[0].id}),o.push({label:"<strong>"+t[1].name+":</strong> "+t[1].players[0].name,team_id:t[1].id,player_id:t[1].players[0].id}),o.push({label:"<strong>"+t[0].name+":</strong> "+t[0].players[1].name,team_id:t[0].id,player_id:t[0].players[1].id}),o.push({label:"<strong>"+t[1].name+":</strong> "+t[1].players[1].name,team_id:t[1].id,player_id:t[1].players[1].id}),o.push({label:"<strong>"+t[0].name+":</strong> "+t[0].players[0].name,team_id:t[0].id,player_id:t[0].players[0].id}),o.push({label:"<strong>"+t[1].name+":</strong> "+t[1].players[1].name,team_id:t[1].id,player_id:t[1].players[1].id}),o.push({label:"<strong>"+t[0].name+":</strong> "+t[0].players[1].name,team_id:t[0].id,player_id:t[0].players[1].id}),o.push({label:"<strong>"+t[1].name+":</strong> "+t[1].players[0].name,team_id:t[1].id,player_id:t[1].players[0].id}),n.push({label:t[0].name,team_id:t[0].id}),n.push({label:t[1].name,team_id:t[1].id}),n.push({label:t[0].players[0].name,player_id:t[0].players[0].id}),n.push({label:t[0].players[1].name,player_id:t[0].players[1].id}),n.push({label:t[1].players[0].name,player_id:t[1].players[0].id}),n.push({label:t[1].players[1].name,player_id:t[1].players[1].id})}return{rows:o,footer:n}},scores_modal_populate_table:function(o,n,r){var l,d,i,p,_,c,m,u=s.$scores_modal.find(".pingpong-scores-table"),y=u.find("tbody"),g=u.find("tfoot");for(u.find("thead").append("<tr />"),l=u.find("thead tr"),l.append("<th />"),c=0;c<o;c++)l.append(e("<th>"+t.game+" "+(c+1)+"</th>"));for(_=0;_<n.length;_++){for(i="undefined"!=typeof n[_].player_id?n[_].player_id:"",p="undefined"!=typeof n[_].team_id?n[_].team_id:"",d='<tr data-player-id="'+i+'" data-team-id="'+p+'"><td>'+n[_].label+"</td>",c=0;c<o;c++)d+='<td><input type="number" value="0" /></td>';d+="</tr>",y.append(e(d))}if(r)for(g.append(e('<tr class="pingpong-tfoot-title"><td colspan="'+(o+1)+'">'+t.totals+":</td></tr>")),m=0;m<r.length;m++)i="undefined"!=typeof r[m].player_id?r[m].player_id:"",p="undefined"!=typeof r[m].team_id?r[m].team_id:"",g.append(e("<tr><td>"+r[m].label+'</td><td data-player-id="'+i+'" data-team-id="'+p+'">0</td><td colspan="'+(o-1)+'"></td></tr>'));a.scores&&s.scores_modal_populate_scores(a.scores.matches)},scores_modal_populate_scores:function(a){return a.length!==s.$scores_modal.find("tbody tr").length/2?void s.scores_modal_error(t.cant_load_scores):(s.$scores_modal.find('tbody td:not(:first-of-type) input[type="number"]').each(function(){var t=e(this).closest("tr"),s=Math.floor(t.index()/2),o=e(this).closest("td").index()-1,n=t.index()%2===1?1:0;e(this).val(a[s][o][n])}),void s.scores_update())},scores_modal_error:function(e){s.$scores_modal.find(".pingpong-scores-error").slideDown().find("p").html(e)},scores_modal_close:function(){e("body").removeClass("pingpong-modal-open"),s.$scores_modal.find(".pingpong-scores-error").hide(),s.$scores_modal.find("thead, tbody, tfoot").html(""),s.$scores_modal.hide()},scores_update:function(){var a,t,o=s.$scores_modal.find("tbody tr").length/2,n=s.$scores_modal.find("thead th").length-1,r={},l={},d={win:null,scores:[],player_1:{id:0,team_id:0,games:0,$row:null},player_2:{id:0,team_id:0,games:0,$row:null}},i={player_1:{score:0,$input:null},player_2:{score:0,$input:null}},p=[];for(a=0;a<o;a++){for(d.player_1.$row=s.$scores_modal.find("tbody tr:eq("+2*a+")"),d.player_2.$row=s.$scores_modal.find("tbody tr:eq("+(2*a+1)+")"),d.player_1.id=d.player_1.$row.attr("data-player-id"),d.player_2.id=d.player_2.$row.attr("data-player-id"),d.player_1.team_id=d.player_1.$row.attr("data-team-id"),d.player_2.team_id=d.player_2.$row.attr("data-team-id"),"undefined"==typeof r[d.player_1.id]&&(r.length++,r[d.player_1.id]=0),"undefined"==typeof r[d.player_2.id]&&(r.length++,r[d.player_2.id]=0),"undefined"==typeof l[d.player_1.team_id]&&(l.length++,l[d.player_1.team_id]=0),"undefined"==typeof l[d.player_2.team_id]&&(l.length++,l[d.player_2.team_id]=0),d.player_1.games=0,d.player_2.games=0,d.win=null,d.scores=[],t=0;t<n;t++)i.player_1.$input=d.player_1.$row.find("td:eq("+(t+1)+') input[type="number"]'),i.player_2.$input=d.player_2.$row.find("td:eq("+(t+1)+') input[type="number"]'),d.player_1.games>=Math.floor(n/2)+1?(d.win=1,i.player_1.$input.prop("disabled",!0),i.player_2.$input.prop("disabled",!0)):d.player_2.games>=Math.floor(n/2)+1?(d.win=2,i.player_1.$input.prop("disabled",!0),i.player_2.$input.prop("disabled",!0)):(i.player_1.$input.prop("disabled",!1),i.player_2.$input.prop("disabled",!1)),i.player_1.score=parseInt(i.player_1.$input.val()),i.player_2.score=parseInt(i.player_2.$input.val()),i.player_1.score>=11&&i.player_1.score-i.player_2.score>=2?d.player_1.games++:i.player_2.score>=11&&i.player_2.score-i.player_1.score>=2&&d.player_2.games++,d.scores.push([i.player_1.score,i.player_2.score]);r[d.player_1.id]=r[d.player_1.id]+d.player_1.games,r[d.player_2.id]=r[d.player_2.id]+d.player_2.games,d.win&&(l[d["player_"+d.win].team_id]=l[d["player_"+d.win].team_id]+1),p.push(d.scores)}s.scores.players=r,s.scores.teams=l,s.scores.matches=p,e.each(r,function(e,a){return"length"==e||!e||void s.$scores_modal.find('tfoot [data-player-id="'+e+'"]').html(a)}),e.each(l,function(e,a){return"length"==e||!e||void s.$scores_modal.find('tfoot [data-team-id="'+e+'"]').html(a)})},scores_modal_submit:function(){confirm(t.confirm_submit_match)&&e.post(ajaxurl,{action:"pingpong_submit_scores",match_ID:a.match_ID,scores:s.scores},function(e){return"undefined"!=typeof e.success&&e.success?void(window.location=e.data.redirect):void alert(t.could_not_save_match)})}};e(s.init)}(jQuery);var PingPong_Admin_MatchCPTs;!function(e){"use strict";var a={},t={};"undefined"!=typeof PingPong_Admin&&(a=PingPong_Admin,t="undefined"!=typeof PingPong_Admin.l10n?PingPong_Admin.l10n:{});var s=PingPong_Admin_MatchCPTs={$games:null,init:function(){s.get_elements(),s.setup_handlers()},get_elements:function(){s.$games=e("#pingpong-won-games")},setup_handlers:function(){e(document).on("click","[data-expand-games]",s.toggle_games)},toggle_games:function(a){var o=s.$games.is(":visible");a.preventDefault(),o?(e(this).html(t.view_matches),s.hide_games()):(e(this).html(t.hide_matches),s.expand_games())},expand_games:function(e){s.$games.show()},hide_games:function(e){s.$games.hide()}};e(s.init)}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBpbmdwb25nLWFkbWluLm1pbi5qcyJdLCJuYW1lcyI6WyJQaW5nUG9uZ19BZG1pbl9NYXRjaENQVHMiLCIkIiwiZGF0YSIsImwxMG4iLCJQaW5nUG9uZ19BZG1pbiIsImFwaSIsIiRzY29yZXNfbW9kYWwiLCIkZ2FtZXNfaW5wdXQiLCJzY29yZXMiLCJwbGF5ZXJzIiwidGVhbXMiLCJtYXRjaGVzIiwiaW5pdCIsImdldF9lbGVtZW50cyIsInNldHVwX2hhbmRsZXJzIiwiaW5pdGlhbGl6ZV9tYXRjaF90eXBlIiwiJGdhbWVfdHlwZV9pbnB1dCIsImRvY3VtZW50Iiwib24iLCJtYXRjaF90eXBlX3NlbGVjdCIsInNjb3Jlc19tb2RhbF9jbG9zZSIsInNjb3Jlc19tb2RhbF9hZGRfc2NvcmVzIiwic2NvcmVzX21vZGFsX3N1Ym1pdCIsInNjb3Jlc191cGRhdGUiLCJzY29yZXNfbW9kYWxfcHJldmlldyIsImNsaWNrIiwidHlwZSIsInRoaXMiLCJ2YWwiLCIkbWJfYWN0aXZlIiwiJG1iX2luYWN0aXZlIiwibGVuZ3RoIiwic2hvdyIsImhpZGUiLCIkcGxheWVyc19zZWxlY3QiLCIkdGVhbXNfc2VsZWN0IiwicGxheWVyX0lEcyIsInRlYW1fSURzIiwidGVhbV9uYW1lcyIsInRhYmxlX2RhdGEiLCJpIiwiZ2FtZXMiLCJnYW1lX3R5cGUiLCJmaWx0ZXIiLCIkdGFibGUiLCJmaW5kIiwiY29sdW1ucyIsImFkZENsYXNzIiwicGFyc2VJbnQiLCJzY29yZXNfbW9kYWxfb3BlbiIsInB1c2giLCJuYW1lIiwiaHRtbCIsInRyaW0iLCJpZCIsInNjb3Jlc19tb2RhbF9nZXRfdGFibGVfZGF0YSIsInNjb3Jlc19tb2RhbF9wb3B1bGF0ZV90YWJsZSIsInJvd3MiLCJmb290ZXIiLCJwb3N0IiwiYWpheHVybCIsImFjdGlvbiIsInJlc3BvbnNlIiwicmVtb3ZlQ2xhc3MiLCJzdWNjZXNzIiwiZSIsIm1hdGNoX2lkIiwiY2xvc2VzdCIsImF0dHIiLCJtYXRjaCIsInByZXZlbnREZWZhdWx0Iiwic2NvcmVzX21vZGFsX3BvcHVsYXRlX3Njb3JlcyIsInByb3AiLCJsYWJlbCIsInBsYXllcl9pZCIsInRlYW1faWQiLCIkdGhlYWRfcm93Iiwicm93Iiwicm93X2kiLCJjb2x1bW5faSIsImZvb3RfaSIsIiR0Ym9keSIsIiR0Zm9vdCIsImFwcGVuZCIsInNjb3Jlc19tb2RhbF9lcnJvciIsImVhY2giLCIkcm93IiwiTWF0aCIsImZsb29yIiwiaW5kZXgiLCJnYW1lIiwicGxheWVyX2luZGV4IiwibWVzc2FnZSIsInNsaWRlRG93biIsIm1hdGNoX2kiLCJnYW1lX2kiLCJ0b3RhbF9tYXRjaGVzIiwidG90YWxfZ2FtZXMiLCJ3aW4iLCJwbGF5ZXJfMSIsInBsYXllcl8yIiwic2NvcmUiLCIkaW5wdXQiLCJwbGF5ZXJfSUQiLCJwbGF5ZXJfc2NvcmUiLCJ0ZWFtX0lEIiwidGVhbV9zY29yZSIsImNvbmZpcm0iLCJtYXRjaF9JRCIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVkaXJlY3QiLCJhbGVydCIsImpRdWVyeSIsIiRnYW1lcyIsInRvZ2dsZV9nYW1lcyIsImlzIiwiaGlkZV9nYW1lcyIsImV4cGFuZF9nYW1lcyJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsMkJBQ0osU0FBV0MsR0FDUCxZQUVBLElBQUlDLE1BQVdDLElBRWMsb0JBQWxCQyxrQkFFUEYsRUFBT0UsZUFDUEQsRUFBcUMsbUJBQXZCQyxnQkFBZUQsS0FBc0JDLGVBQWVELFFBR3RFLElBQUlFLEdBQU1MLDBCQU9OTSxjQUFlLEtBT2ZDLGFBQWMsS0FPZEMsUUFDSUMsV0FDQUMsU0FDQUMsWUFRSkMsS0FBTSxXQUVGUCxFQUFJUSxlQUNKUixFQUFJUyxpQkFDSlQsRUFBSVUsd0JBRUFiLEVBQUtNLFNBRUxILEVBQUlHLE9BQVNOLEVBQUtNLFNBUzFCSyxhQUFjLFdBRVZSLEVBQUlDLGNBQWdCTCxFQUFFLDBCQUN0QkksRUFBSUUsYUFBZU4sRUFBRSw2QkFDckJJLEVBQUlXLGlCQUFtQmYsRUFBRSw0QkFRN0JhLGVBQWdC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RCxhQUFjLFdBRVZSLEVBQUk2RyxPQUFTakgsRUFBRSx3QkFRbkJhLGVBQWdCLFdBRVpiLEVBQUVnQixVQUFVQyxHQUFHLFFBQVMsc0JBQXVCYixFQUFJOEcsZUFVdkRBLGFBQWMsU0FBVWxELEdBRXBCLEdBQUloQyxHQUFPNUIsRUFBSTZHLE9BQU9FLEdBQUcsV0FFekJuRCxHQUFFSyxpQkFFRXJDLEdBRUFoQyxFQUFFMEIsTUFBTXlCLEtBQUtqRCxFQUFtQixjQUNoQ0UsRUFBSWdILGVBSUpwSCxFQUFFMEIsTUFBTXlCLEtBQUtqRCxFQUFtQixjQUNoQ0UsRUFBSWlILGlCQVNaQSxhQUFjLFNBQVVyRCxHQUVwQjVELEVBQUk2RyxPQUFPbEYsUUFTZnFGLFdBQVksU0FBVXBELEdBRWxCNUQsRUFBSTZHLE9BQU9qRixRQUluQmhDLEdBQUVJLEVBQUlPLE9BQ1BxRyIsImZpbGUiOiJwaW5ncG9uZy1hZG1pbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUGluZ1BvbmdfQWRtaW5fTWF0Y2hDUFRzXG4oZnVuY3Rpb24gKCQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZGF0YSA9IHt9LCBsMTBuID0ge307XG5cbiAgICBpZiAodHlwZW9mIFBpbmdQb25nX0FkbWluICE9ICd1bmRlZmluZWQnKSB7XG5cbiAgICAgICAgZGF0YSA9IFBpbmdQb25nX0FkbWluO1xuICAgICAgICBsMTBuID0gdHlwZW9mIFBpbmdQb25nX0FkbWluLmwxMG4gIT0gJ3VuZGVmaW5lZCcgPyBQaW5nUG9uZ19BZG1pbi5sMTBuIDoge307XG4gICAgfVxuXG4gICAgdmFyIGFwaSA9IFBpbmdQb25nX0FkbWluX01hdGNoQ1BUcyA9IHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogalF1ZXJ5IG9iamVjdCBmb3IgdGhlIHNjb3JlcyBtb2RhbC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHNpbmNlIHt7VkVSU0lPTn19XG4gICAgICAgICAqL1xuICAgICAgICAkc2NvcmVzX21vZGFsOiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBqUXVlcnkgb2JqZWN0IGZvciB0aGUgZ2FtZXMgaW5wdXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzaW5jZSB7e1ZFUlNJT059fVxuICAgICAgICAgKi9cbiAgICAgICAgJGdhbWVzX2lucHV0OiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTY29yZXMgdG8gYmUgc3VibWl0dGVkIGZvciBzYXZpbmcuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzaW5jZSB7e1ZFUlNJT059fVxuICAgICAgICAgKi9cbiAgICAgICAgc2NvcmVzOiB7XG4gICAgICAgICAgICBwbGF5ZXJzOiB7fSxcbiAgICAgICAgICAgIHRlYW1zOiB7fSxcbiAgICAgICAgICAgIG1hdGNoZXM6IFtdLFxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0aWFsaXplcyB0aGlzIG9iamVjdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHNpbmNlIHt7VkVSU0lPTn19XG4gICAgICAgICAqL1xuICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIGFwaS5nZXRfZWxlbWVudHMoKTtcbiAgICAgICAgICAgIGFwaS5zZXR1cF9oYW5kbGVycygpO1xuICAgICAgICAgICAgYXBpLmluaXRpYWxpemVfbWF0Y2hfdHlwZSgpO1xuXG4gICAgICAgICAgICBpZiAoZGF0YS5zY29yZXMpIHtcblxuICAgICAgICAgICAgICAgIGFwaS5zY29yZXMgPSBkYXRhLnNjb3JlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyBhbGwgalF1ZXJ5IGVsZW1lbnRzIG5lZWRlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHNpbmNlIHt7VkVSU0lPTn19XG4gICAgICAgICAqL1xuICAgICAgICBnZXRfZWxlbWVudHM6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgYXBpLiRzY29yZXNfbW9kYWwgPSAkKCcjcGluZ3Bvbmctc2NvcmVzLW1vZGFsJyk7XG4gICAgICAgICAgICBhcGkuJGdhbWVzX2lucHV0ID0gJCgnc2VsZWN0W25hbWU9XCJfcmJtX2dhbWVzXCJdJyk7XG4gICAgICAgICAgICBhcGkuJGdhbWVfdHlwZV9pbnB1dCA9ICQoJ2lucHV0W25hbWU9XCJfcmJtX3R5cGVcIl0nKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB1cCBoYW5kbGVycyBvbiBldmVudHMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzaW5jZSB7e1ZFUlNJT059fVxuICAgICAgICAgKi9cbiAgICAgICAgc2V0dXBfaGFuZGxlcnM6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNtYXRjaC10eXBlIC5yYm0tZmllbGQtcmFkaW8gaW5wdXRbdHlwZT1cInJhZGlvXCJdJywgYXBpLm1hdGNoX3R5cGVfc2VsZWN0KTtcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS1zY29yZXMtY2xvc2VdJywgYXBpLnNjb3Jlc19tb2RhbF9jbG9zZSk7XG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtc2NvcmVzLW9wZW5dJywgYXBpLnNjb3Jlc19tb2RhbF9hZGRfc2NvcmVzKTtcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS1zY29yZXMtc3VibWl0XScsIGFwaS5zY29yZXNfbW9kYWxfc3VibWl0KTtcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnLnBpbmdwb25nLXNjb3Jlcy10YWJsZSBpbnB1dFt0eXBlPVwibnVtYmVyXCJdJywgYXBpLnNjb3Jlc191cGRhdGUpO1xuXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLFxuICAgICAgICAgICAgICAgICdib2R5LnBvc3QtdHlwZS1tYXRjaC5waW5ncG9uZy1tYXRjaGVzLWNvbXBsZXRlIC53cC1saXN0LXRhYmxlIGEucm93LXRpdGxlLCcgK1xuICAgICAgICAgICAgICAgICdib2R5LnBvc3QtdHlwZS1tYXRjaC5waW5ncG9uZy1tYXRjaGVzLWNvbXBsZXRlIC53cC1saXN0LXRhYmxlIC5yb3ctYWN0aW9ucyAuZWRpdCBhJyxcbiAgICAgICAgICAgICAgICBhcGkuc2NvcmVzX21vZGFsX3ByZXZpZXcpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0aWFsaXplcyB0aGUgYWN0aXZlIG1hdGNoIHR5cGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzaW5jZSB7e1ZFUlNJT059fVxuICAgICAgICAgKi9cbiAgICAgICAgaW5pdGlhbGl6ZV9tYXRjaF90eXBlOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICQoJyNtYXRjaC10eXBlIC5yYm0tZmllbGQtcmFkaW8gaW5wdXRbdHlwZT1cInJhZGlvXCJdOmNoZWNrZWQnKS5jbGljaygpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyB3aGVuIHNlbGVjdGluZyBhIG1hdGNoIHR5cGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzaW5jZSB7e1ZFUlNJT059fVxuICAgICAgICAgKi9cbiAgICAgICAgbWF0Y2hfdHlwZV9zZWxlY3Q6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyIHR5cGUgPSAkKHRoaXMpLnZhbCgpLFxuICAgICAgICAgICAgICAgICRtYl9hY3RpdmUgPSAkKCcjbWF0Y2gtc2V0dGluZ3MtJyArIHR5cGUpLFxuICAgICAgICAgICAgICAgICRtYl9pbmFjdGl2ZSA9ICQoJ1tpZF49XCJtYXRjaC1zZXR0aW5ncy1cIl06bm90KCNtYXRjaC1zZXR0aW5ncy0nICsgdHlwZSArICcpJyk7XG5cbiAgICAgICAgICAgIGlmICghJG1iX2FjdGl2ZS5sZW5ndGgpIHtcblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJG1iX2FjdGl2ZS5zaG93KCk7XG4gICAgICAgICAgICAkbWJfaW5hY3RpdmUuaGlkZSgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPcGVucyB0aGUgc2NvcmVzIG1vZGFsLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc2luY2Uge3tWRVJTSU9OfX1cbiAgICAgICAgICovXG4gICAgICAgIHNjb3Jlc19tb2RhbF9hZGRfc2NvcmVzOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIHZhciBnYW1lcyA9IGFwaS4kZ2FtZXNfaW5wdXQudmFsKCksXG4gICAgICAgICAgICAgICAgZ2FtZV90eXBlID0gYXBpLiRnYW1lX3R5cGVfaW5wdXQuZmlsdGVyKCc6Y2hlY2tlZCcpLnZhbCgpLFxuICAgICAgICAgICAgICAgICR0YWJsZSA9IGFwaS4kc2NvcmVzX21vZGFsLmZpbmQoJy5waW5ncG9uZy1zY29yZXMtdGFibGUnKSxcbiAgICAgICAgICAgICAgICAkdGhlYWRfcm93ID0gJHRhYmxlLmZpbmQoJ3RoZWFkIHRyJyksXG4gICAgICAgICAgICAgICAgJHRib2R5ID0gJHRhYmxlLmZpbmQoJ3Rib2R5JyksXG4gICAgICAgICAgICAgICAgJHRib2R5X3Jvd3MsXG4gICAgICAgICAgICAgICAgJHBsYXllcnNfc2VsZWN0LFxuICAgICAgICAgICAgICAgICR0ZWFtc19zZWxlY3QsXG4gICAgICAgICAgICAgICAgcGxheWVyX0lEcywgdGVhbV9JRHMsIHRlYW1fbmFtZXMsXG4gICAgICAgICAgICAgICAgdGFibGVfZGF0YSxcbiAgICAgICAgICAgICAgICBjb2x1bW5zID0gMCwgcm93cyA9IFtdLCBmb290ZXIgPSBbXSwgaTtcblxuICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdwaW5ncG9uZy1tb2RhbC1vcGVuJyk7XG5cbiAgICAgICAgICAgIGNvbHVtbnMgPSBwYXJzZUludChnYW1lcyk7XG5cbiAgICAgICAgICAgIGFwaS5zY29yZXNfbW9kYWxfb3BlbigpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgcm93c1xuICAgICAgICAgICAgc3dpdGNoIChnYW1lX3R5cGUpIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ3NpbmdsZXMnOlxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBwbGF5ZXJzID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgJHBsYXllcnNfc2VsZWN0ID0gJCgnc2VsZWN0W25hbWU9XCJfcmJtX3NpbmdsZXNfcGxheWVyc1tdXCJdJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllcl9JRHMgPSAkcGxheWVyc19zZWxlY3QudmFsKCkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHBsYXllcl9JRHMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICRwbGF5ZXJzX3NlbGVjdC5maW5kKCdvcHRpb25bdmFsdWU9XCInICsgcGxheWVyX0lEc1tpXSArICdcIl0nKS5odG1sKCkudHJpbSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogcGxheWVyX0lEc1tpXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZV9kYXRhID0gYXBpLnNjb3Jlc19tb2RhbF9nZXRfdGFibGVfZGF0YSgnc2luZ2xlcycsIHBsYXllcnMpXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBhcGkuc2NvcmVzX21vZGFsX3BvcHVsYXRlX3RhYmxlKGNvbHVtbnMsIHRhYmxlX2RhdGEucm93cywgdGFibGVfZGF0YS5mb290ZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnZG91Ymxlcyc6XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlYW1zID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgJHRlYW1zX3NlbGVjdCA9ICQoJ3NlbGVjdFtuYW1lPVwiX3JibV9kb3VibGVzX3RlYW1zW11cIl0nKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGVhbV9JRHMgPSAkdGVhbXNfc2VsZWN0LnZhbCgpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0ZWFtX0lEcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVhbXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICR0ZWFtc19zZWxlY3QuZmluZCgnb3B0aW9uW3ZhbHVlPVwiJyArIHRlYW1fSURzW2ldICsgJ1wiXScpLmh0bWwoKS50cmltKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB0ZWFtX0lEc1tpXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYXBpLnNjb3Jlc19tb2RhbF9nZXRfdGFibGVfZGF0YSgnZG91YmxlcycsIGZhbHNlLCB0ZWFtcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgYXBpLnNjb3Jlc19tb2RhbF9wb3B1bGF0ZV90YWJsZShjb2x1bW5zLCB0YWJsZV9kYXRhLnJvd3MpO1xuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAndGVhbSc6XG5cbiAgICAgICAgICAgICAgICAgICAgJHRlYW1zX3NlbGVjdCA9ICQoJ3NlbGVjdFtuYW1lPVwiX3JibV90ZWFtc1tdXCJdJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRlYW1fSURzID0gJHRlYW1zX3NlbGVjdC52YWwoKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGkuJHNjb3Jlc19tb2RhbC5maW5kKCcucGluZ3Bvbmctc2NvcmVzLWNvbnRhaW5lcicpLmFkZENsYXNzKCdsb2FkaW5nJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRlYW1fbmFtZXMgPSB7fTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRlYW1fSURzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZWFtX25hbWVzW3RlYW1fSURzW2ldXSA9ICR0ZWFtc19zZWxlY3QuZmluZCgnb3B0aW9uW3ZhbHVlPVwiJyArIHRlYW1fSURzW2ldICsgJ1wiXScpLmh0bWwoKS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQucG9zdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhamF4dXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAncGluZ3BvbmdfZ2V0X3RlYW1fcGxheWVycycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlYW1fSURzOiB0ZWFtX0lEc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlYW1zID0gcmVzcG9uc2UuZGF0YTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkuJHNjb3Jlc19tb2RhbC5maW5kKCcucGluZ3Bvbmctc2NvcmVzLWNvbnRhaW5lcicpLnJlbW92ZUNsYXNzKCdsb2FkaW5nJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXNwb25zZS5zdWNjZXNzID09ICd1bmRlZmluZWQnIHx8ICFyZXNwb25zZS5zdWNjZXNzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlX2RhdGEgPSBhcGkuc2NvcmVzX21vZGFsX2dldF90YWJsZV9kYXRhKCd0ZWFtJywgZmFsc2UsIHRlYW1zKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkuc2NvcmVzX21vZGFsX3BvcHVsYXRlX3RhYmxlKGNvbHVtbnMsIHRhYmxlX2RhdGEucm93cywgdGFibGVfZGF0YS5mb290ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcmV2aWV3IHNjb3Jlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHNpbmNlIHt7VkVSU0lPTn19XG4gICAgICAgICAqL1xuICAgICAgICBzY29yZXNfbW9kYWxfcHJldmlldzogZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgdmFyIG1hdGNoX2lkID0gJCh0aGlzKS5jbG9zZXN0KCd0cicpLmF0dHIoJ2lkJykubWF0Y2goL3Bvc3QtKFxcZCspLylbMV07XG5cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgJC5wb3N0KFxuICAgICAgICAgICAgICAgIGFqYXh1cmwsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdwaW5ncG9uZ19nZXRfbWF0Y2hfc2NvcmVzJyxcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hfaWQ6IG1hdGNoX2lkXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGVfZGF0YTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3BvbnNlLnN1Y2Nlc3MgPT0gJ3VuZGVmaW5lZCcgfHwgIXJlc3BvbnNlLnN1Y2Nlc3MpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyZXNwb25zZS5kYXRhLnR5cGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2luZ2xlcyc6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZV9kYXRhID0gYXBpLnNjb3Jlc19tb2RhbF9nZXRfdGFibGVfZGF0YSgnc2luZ2xlcycsIHJlc3BvbnNlLmRhdGEuc2NvcmVzLnBsYXllcnMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RvdWJsZXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0ZWFtJzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlX2RhdGEgPSBhcGkuc2NvcmVzX21vZGFsX2dldF90YWJsZV9kYXRhKCd0ZWFtJywgZmFsc2UsIHJlc3BvbnNlLmRhdGEuc2NvcmVzLnRlYW1zKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYXBpLnNjb3Jlc19tb2RhbF9wb3B1bGF0ZV90YWJsZShcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuc2NvcmVzLm1hdGNoZXNbMF0ubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVfZGF0YS5yb3dzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVfZGF0YS5mb290ZXJcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICBhcGkuc2NvcmVzX21vZGFsX3BvcHVsYXRlX3Njb3JlcyhyZXNwb25zZS5kYXRhLnNjb3Jlcy5tYXRjaGVzKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBEaXNhYmxlIGJlY2F1c2UgaXQncyBvbmx5IGEgcHJldmlld1xuICAgICAgICAgICAgICAgICAgICBhcGkuJHNjb3Jlc19tb2RhbC5maW5kKCdpbnB1dFt0eXBlPVwibnVtYmVyXCJdJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgICAgICBhcGkuc2NvcmVzX21vZGFsX29wZW4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE9wZW5zIHRoZSBzY29yZXMgbW9kYWwuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzaW5jZSB7e1ZFUlNJT059fVxuICAgICAgICAgKi9cbiAgICAgICAgc2NvcmVzX21vZGFsX29wZW46IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgYXBpLiRzY29yZXNfbW9kYWwuc2hvdygpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHRhYmxlIGRhdGEgZm9yIHVzZSBpbiBwb3B1bGF0aW5nIGl0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc2luY2Uge3tWRVJTSU9OfX1cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHR5cGVcbiAgICAgICAgICogQHBhcmFtIHBsYXllcnNcbiAgICAgICAgICogQHBhcmFtIHRlYW1zXG4gICAgICAgICAqL1xuICAgICAgICBzY29yZXNfbW9kYWxfZ2V0X3RhYmxlX2RhdGE6IGZ1bmN0aW9uICh0eXBlLCBwbGF5ZXJzLCB0ZWFtcykge1xuXG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdLCBmb290ZXIgPSBbXSwgaTtcblxuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdzaW5nbGVzJzpcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcGxheWVycy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBwbGF5ZXJzW2ldWyduYW1lJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyX2lkOiBwbGF5ZXJzW2ldWydpZCddXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBwbGF5ZXJzW2ldWyduYW1lJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyX2lkOiBwbGF5ZXJzW2ldWydpZCddLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ2RvdWJsZXMnOlxuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0ZWFtcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0ZWFtc1tpXVsnbmFtZSddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlYW1faWQ6IHRlYW1zW2ldWydpZCddXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAndGVhbSc6XG5cbiAgICAgICAgICAgICAgICAgICAgcm93cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnPHN0cm9uZz4nICsgdGVhbXNbMF1bJ25hbWUnXSArICc6PC9zdHJvbmc+ICcgKyB0ZWFtc1swXVsncGxheWVycyddWzBdWyduYW1lJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZWFtX2lkOiB0ZWFtc1swXVsnaWQnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcl9pZDogdGVhbXNbMF1bJ3BsYXllcnMnXVswXVsnaWQnXVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICByb3dzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICc8c3Ryb25nPicgKyB0ZWFtc1sxXVsnbmFtZSddICsgJzo8L3N0cm9uZz4gJyArIHRlYW1zWzFdWydwbGF5ZXJzJ11bMF1bJ25hbWUnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlYW1faWQ6IHRlYW1zWzFdWydpZCddLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyX2lkOiB0ZWFtc1sxXVsncGxheWVycyddWzBdWydpZCddXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHJvd3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJzxzdHJvbmc+JyArIHRlYW1zWzBdWyduYW1lJ10gKyAnOjwvc3Ryb25nPiAnICsgdGVhbXNbMF1bJ3BsYXllcnMnXVsxXVsnbmFtZSddLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVhbV9pZDogdGVhbXNbMF1bJ2lkJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJfaWQ6IHRlYW1zWzBdWydwbGF5ZXJzJ11bMV1bJ2lkJ11cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcm93cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnPHN0cm9uZz4nICsgdGVhbXNbMV1bJ25hbWUnXSArICc6PC9zdHJvbmc+ICcgKyB0ZWFtc1sxXVsncGxheWVycyddWzFdWyduYW1lJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZWFtX2lkOiB0ZWFtc1sxXVsnaWQnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcl9pZDogdGVhbXNbMV1bJ3BsYXllcnMnXVsxXVsnaWQnXVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICByb3dzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICc8c3Ryb25nPicgKyB0ZWFtc1swXVsnbmFtZSddICsgJzo8L3N0cm9uZz4gJyArIHRlYW1zWzBdWydwbGF5ZXJzJ11bMF1bJ25hbWUnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlYW1faWQ6IHRlYW1zWzBdWydpZCddLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyX2lkOiB0ZWFtc1swXVsncGxheWVycyddWzBdWydpZCddXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHJvd3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJzxzdHJvbmc+JyArIHRlYW1zWzFdWyduYW1lJ10gKyAnOjwvc3Ryb25nPiAnICsgdGVhbXNbMV1bJ3BsYXllcnMnXVsxXVsnbmFtZSddLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVhbV9pZDogdGVhbXNbMV1bJ2lkJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJfaWQ6IHRlYW1zWzFdWydwbGF5ZXJzJ11bMV1bJ2lkJ11cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcm93cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnPHN0cm9uZz4nICsgdGVhbXNbMF1bJ25hbWUnXSArICc6PC9zdHJvbmc+ICcgKyB0ZWFtc1swXVsncGxheWVycyddWzFdWyduYW1lJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZWFtX2lkOiB0ZWFtc1swXVsnaWQnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcl9pZDogdGVhbXNbMF1bJ3BsYXllcnMnXVsxXVsnaWQnXVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICByb3dzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICc8c3Ryb25nPicgKyB0ZWFtc1sxXVsnbmFtZSddICsgJzo8L3N0cm9uZz4gJyArIHRlYW1zWzFdWydwbGF5ZXJzJ11bMF1bJ25hbWUnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlYW1faWQ6IHRlYW1zWzFdWydpZCddLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyX2lkOiB0ZWFtc1sxXVsncGxheWVycyddWzBdWydpZCddXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvb3Rlci5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0ZWFtc1swXVsnbmFtZSddLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVhbV9pZDogdGVhbXNbMF1bJ2lkJ10sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvb3Rlci5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0ZWFtc1sxXVsnbmFtZSddLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVhbV9pZDogdGVhbXNbMV1bJ2lkJ10sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvb3Rlci5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0ZWFtc1swXVsncGxheWVycyddWzBdWyduYW1lJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJfaWQ6IHRlYW1zWzBdWydwbGF5ZXJzJ11bMF1bJ2lkJ10sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvb3Rlci5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0ZWFtc1swXVsncGxheWVycyddWzFdWyduYW1lJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJfaWQ6IHRlYW1zWzBdWydwbGF5ZXJzJ11bMV1bJ2lkJ10sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvb3Rlci5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0ZWFtc1sxXVsncGxheWVycyddWzBdWyduYW1lJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJfaWQ6IHRlYW1zWzFdWydwbGF5ZXJzJ11bMF1bJ2lkJ10sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvb3Rlci5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0ZWFtc1sxXVsncGxheWVycyddWzFdWyduYW1lJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJfaWQ6IHRlYW1zWzFdWydwbGF5ZXJzJ11bMV1bJ2lkJ10sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJvd3M6IHJvd3MsXG4gICAgICAgICAgICAgICAgZm9vdGVyOiBmb290ZXJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBvcHVsYXRlcyB0aGUgc2NvcmVzIG1vZGFsIHRhYmxlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc2luY2Uge3tWRVJTSU9OfX1cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGNvbHVtbnNcbiAgICAgICAgICogQHBhcmFtIHJvd3NcbiAgICAgICAgICogQHBhcmFtIGZvb3RlclxuICAgICAgICAgKi9cbiAgICAgICAgc2NvcmVzX21vZGFsX3BvcHVsYXRlX3RhYmxlOiBmdW5jdGlvbiAoY29sdW1ucywgcm93cywgZm9vdGVyKSB7XG5cbiAgICAgICAgICAgIHZhciAkdGFibGUgPSBhcGkuJHNjb3Jlc19tb2RhbC5maW5kKCcucGluZ3Bvbmctc2NvcmVzLXRhYmxlJyksXG4gICAgICAgICAgICAgICAgJHRib2R5ID0gJHRhYmxlLmZpbmQoJ3Rib2R5JyksXG4gICAgICAgICAgICAgICAgJHRmb290ID0gJHRhYmxlLmZpbmQoJ3Rmb290JyksXG4gICAgICAgICAgICAgICAgJHRoZWFkX3JvdyxcbiAgICAgICAgICAgICAgICAkdGJvZHlfcm93cyxcbiAgICAgICAgICAgICAgICByb3csXG4gICAgICAgICAgICAgICAgcGxheWVyX2lkLCB0ZWFtX2lkLFxuICAgICAgICAgICAgICAgIHJvd19pLCBjb2x1bW5faSwgZm9vdF9pO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlYWRcbiAgICAgICAgICAgICR0YWJsZS5maW5kKCd0aGVhZCcpLmFwcGVuZCgnPHRyIC8+Jyk7XG4gICAgICAgICAgICAkdGhlYWRfcm93ID0gJHRhYmxlLmZpbmQoJ3RoZWFkIHRyJyk7XG4gICAgICAgICAgICAkdGhlYWRfcm93LmFwcGVuZCgnPHRoIC8+Jyk7XG5cbiAgICAgICAgICAgIGZvciAoY29sdW1uX2kgPSAwOyBjb2x1bW5faSA8IGNvbHVtbnM7IGNvbHVtbl9pKyspIHtcblxuICAgICAgICAgICAgICAgICR0aGVhZF9yb3cuYXBwZW5kKCQoJzx0aD4nICsgbDEwblsnZ2FtZSddICsgJyAnICsgKGNvbHVtbl9pICsgMSkgKyAnPC90aD4nKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSB0Ym9keVxuICAgICAgICAgICAgZm9yIChyb3dfaSA9IDA7IHJvd19pIDwgcm93cy5sZW5ndGg7IHJvd19pKyspIHtcblxuICAgICAgICAgICAgICAgIHBsYXllcl9pZCA9IHR5cGVvZiByb3dzW3Jvd19pXVsncGxheWVyX2lkJ10gIT0gJ3VuZGVmaW5lZCcgPyByb3dzW3Jvd19pXVsncGxheWVyX2lkJ10gOiAnJztcbiAgICAgICAgICAgICAgICB0ZWFtX2lkID0gdHlwZW9mIHJvd3Nbcm93X2ldWyd0ZWFtX2lkJ10gIT0gJ3VuZGVmaW5lZCcgPyByb3dzW3Jvd19pXVsndGVhbV9pZCddIDogJyc7XG5cbiAgICAgICAgICAgICAgICByb3cgPSAnPHRyIGRhdGEtcGxheWVyLWlkPVwiJyArIHBsYXllcl9pZCArICdcIiBkYXRhLXRlYW0taWQ9XCInICsgdGVhbV9pZCArXG4gICAgICAgICAgICAgICAgICAgICdcIj48dGQ+JyArIHJvd3Nbcm93X2ldWydsYWJlbCddICsgJzwvdGQ+J1xuXG4gICAgICAgICAgICAgICAgZm9yIChjb2x1bW5faSA9IDA7IGNvbHVtbl9pIDwgY29sdW1uczsgY29sdW1uX2krKykge1xuXG4gICAgICAgICAgICAgICAgICAgIHJvdyA9IHJvdyArICc8dGQ+PGlucHV0IHR5cGU9XCJudW1iZXJcIiB2YWx1ZT1cIjBcIiAvPjwvdGQ+JztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByb3cgPSByb3cgKyAnPC90cj4nXG5cbiAgICAgICAgICAgICAgICAkdGJvZHkuYXBwZW5kKCQocm93KSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSB0Zm9vdFxuICAgICAgICAgICAgaWYgKGZvb3Rlcikge1xuXG4gICAgICAgICAgICAgICAgJHRmb290LmFwcGVuZCgkKFxuICAgICAgICAgICAgICAgICAgICAnPHRyIGNsYXNzPVwicGluZ3BvbmctdGZvb3QtdGl0bGVcIj48dGQgY29sc3Bhbj1cIicgKyAoY29sdW1ucyArIDEpICsgJ1wiPicgKyBsMTBuWyd0b3RhbHMnXSArICc6PC90ZD48L3RyPidcbiAgICAgICAgICAgICAgICApKTtcblxuICAgICAgICAgICAgICAgIGZvciAoZm9vdF9pID0gMDsgZm9vdF9pIDwgZm9vdGVyLmxlbmd0aDsgZm9vdF9pKyspIHtcblxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXJfaWQgPSB0eXBlb2YgZm9vdGVyW2Zvb3RfaV1bJ3BsYXllcl9pZCddICE9ICd1bmRlZmluZWQnID8gZm9vdGVyW2Zvb3RfaV1bJ3BsYXllcl9pZCddIDogJyc7XG4gICAgICAgICAgICAgICAgICAgIHRlYW1faWQgPSB0eXBlb2YgZm9vdGVyW2Zvb3RfaV1bJ3RlYW1faWQnXSAhPSAndW5kZWZpbmVkJyA/IGZvb3Rlcltmb290X2ldWyd0ZWFtX2lkJ10gOiAnJztcblxuICAgICAgICAgICAgICAgICAgICAkdGZvb3QuYXBwZW5kKCQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHRyPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzx0ZD4nICsgZm9vdGVyW2Zvb3RfaV1bJ2xhYmVsJ10gKyAnPC90ZD4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8dGQgZGF0YS1wbGF5ZXItaWQ9XCInICsgcGxheWVyX2lkICsgJ1wiIGRhdGEtdGVhbS1pZD1cIicgKyB0ZWFtX2lkICsgJ1wiPjA8L3RkPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzx0ZCBjb2xzcGFuPVwiJyArIChjb2x1bW5zIC0gMSkgKyAnXCI+PC90ZD4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L3RyPidcbiAgICAgICAgICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBQb3B1bGF0ZSBzY29yZXNcbiAgICAgICAgICAgIGlmIChkYXRhLnNjb3Jlcykge1xuXG4gICAgICAgICAgICAgICAgYXBpLnNjb3Jlc19tb2RhbF9wb3B1bGF0ZV9zY29yZXMoZGF0YS5zY29yZXMubWF0Y2hlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBvcHVsYXRlcyB0aGUgdGFibGUgd2l0aCBwcmV2aW91c2x5IHNldCBzY29yZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzaW5jZSB7e1ZFUlNJT059fVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gbWF0Y2hlc1xuICAgICAgICAgKi9cbiAgICAgICAgc2NvcmVzX21vZGFsX3BvcHVsYXRlX3Njb3JlczogZnVuY3Rpb24gKG1hdGNoZXMpIHtcblxuICAgICAgICAgICAgdmFyIGk7XG5cbiAgICAgICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCAhPT0gYXBpLiRzY29yZXNfbW9kYWwuZmluZCgndGJvZHkgdHInKS5sZW5ndGggLyAyKSB7XG5cbiAgICAgICAgICAgICAgICBhcGkuc2NvcmVzX21vZGFsX2Vycm9yKGwxMG5bJ2NhbnRfbG9hZF9zY29yZXMnXSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhcGkuJHNjb3Jlc19tb2RhbC5maW5kKCd0Ym9keSB0ZDpub3QoOmZpcnN0LW9mLXR5cGUpIGlucHV0W3R5cGU9XCJudW1iZXJcIl0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIHZhciAkcm93ID0gJCh0aGlzKS5jbG9zZXN0KCd0cicpLFxuICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IE1hdGguZmxvb3IoJHJvdy5pbmRleCgpIC8gMiksXG4gICAgICAgICAgICAgICAgICAgIGdhbWUgPSAkKHRoaXMpLmNsb3Nlc3QoJ3RkJykuaW5kZXgoKSAtIDEsXG4gICAgICAgICAgICAgICAgICAgIHBsYXllcl9pbmRleCA9ICRyb3cuaW5kZXgoKSAlIDIgPT09IDEgPyAxIDogMDtcblxuICAgICAgICAgICAgICAgICQodGhpcykudmFsKG1hdGNoZXNbbWF0Y2hdW2dhbWVdW3BsYXllcl9pbmRleF0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGFwaS5zY29yZXNfdXBkYXRlKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNob3dzIGFuIGVycm9yLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc2luY2Uge3tWRVJTSU9OfX1cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2VcbiAgICAgICAgICovXG4gICAgICAgIHNjb3Jlc19tb2RhbF9lcnJvcjogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcblxuICAgICAgICAgICAgYXBpLiRzY29yZXNfbW9kYWwuZmluZCgnLnBpbmdwb25nLXNjb3Jlcy1lcnJvcicpLnNsaWRlRG93bigpLmZpbmQoJ3AnKS5odG1sKG1lc3NhZ2UpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDbG9zZXMgdGhlIHNjb3JlcyBtb2RhbC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHNpbmNlIHt7VkVSU0lPTn19XG4gICAgICAgICAqL1xuICAgICAgICBzY29yZXNfbW9kYWxfY2xvc2U6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdwaW5ncG9uZy1tb2RhbC1vcGVuJyk7XG5cbiAgICAgICAgICAgIGFwaS4kc2NvcmVzX21vZGFsLmZpbmQoJy5waW5ncG9uZy1zY29yZXMtZXJyb3InKS5oaWRlKCk7XG4gICAgICAgICAgICBhcGkuJHNjb3Jlc19tb2RhbC5maW5kKCd0aGVhZCwgdGJvZHksIHRmb290JykuaHRtbCgnJyk7XG4gICAgICAgICAgICBhcGkuJHNjb3Jlc19tb2RhbC5oaWRlKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVwZGF0ZXMgYWxsIG9mIHRoZSBzY29yZXMgaW4gdGhlIHRhYmxlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc2luY2Uge3tWRVJTSU9OfX1cbiAgICAgICAgICovXG4gICAgICAgIHNjb3Jlc191cGRhdGU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyIHRvdGFsX21hdGNoZXMgPSBhcGkuJHNjb3Jlc19tb2RhbC5maW5kKCd0Ym9keSB0cicpLmxlbmd0aCAvIDIsXG4gICAgICAgICAgICAgICAgdG90YWxfZ2FtZXMgPSBhcGkuJHNjb3Jlc19tb2RhbC5maW5kKCd0aGVhZCB0aCcpLmxlbmd0aCAtIDEsXG4gICAgICAgICAgICAgICAgbWF0Y2hfaSwgZ2FtZV9pLFxuICAgICAgICAgICAgICAgIHBsYXllcnMgPSB7fSxcbiAgICAgICAgICAgICAgICB0ZWFtcyA9IHt9LFxuICAgICAgICAgICAgICAgIG1hdGNoID0ge1xuICAgICAgICAgICAgICAgICAgICB3aW46IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHNjb3JlczogW10sXG4gICAgICAgICAgICAgICAgICAgIHBsYXllcl8xOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlYW1faWQ6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lczogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb3c6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBsYXllcl8yOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlYW1faWQ6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lczogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb3c6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnYW1lID0ge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXJfMToge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmU6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAkaW5wdXQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBsYXllcl8yOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29yZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbnB1dDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1hdGNoZXMgPSBbXTtcblxuICAgICAgICAgICAgZm9yIChtYXRjaF9pID0gMDsgbWF0Y2hfaSA8IHRvdGFsX21hdGNoZXM7IG1hdGNoX2krKykge1xuXG4gICAgICAgICAgICAgICAgbWF0Y2gucGxheWVyXzEuJHJvdyA9IGFwaS4kc2NvcmVzX21vZGFsLmZpbmQoJ3Rib2R5IHRyOmVxKCcgKyAobWF0Y2hfaSAqIDIpICsgJyknKTtcbiAgICAgICAgICAgICAgICBtYXRjaC5wbGF5ZXJfMi4kcm93ID0gYXBpLiRzY29yZXNfbW9kYWwuZmluZCgndGJvZHkgdHI6ZXEoJyArICgobWF0Y2hfaSAqIDIpICsgMSkgKyAnKScpO1xuXG4gICAgICAgICAgICAgICAgbWF0Y2gucGxheWVyXzEuaWQgPSBtYXRjaC5wbGF5ZXJfMS4kcm93LmF0dHIoJ2RhdGEtcGxheWVyLWlkJyk7XG4gICAgICAgICAgICAgICAgbWF0Y2gucGxheWVyXzIuaWQgPSBtYXRjaC5wbGF5ZXJfMi4kcm93LmF0dHIoJ2RhdGEtcGxheWVyLWlkJyk7XG5cbiAgICAgICAgICAgICAgICBtYXRjaC5wbGF5ZXJfMS50ZWFtX2lkID0gbWF0Y2gucGxheWVyXzEuJHJvdy5hdHRyKCdkYXRhLXRlYW0taWQnKTtcbiAgICAgICAgICAgICAgICBtYXRjaC5wbGF5ZXJfMi50ZWFtX2lkID0gbWF0Y2gucGxheWVyXzIuJHJvdy5hdHRyKCdkYXRhLXRlYW0taWQnKTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcGxheWVyc1ttYXRjaC5wbGF5ZXJfMS5pZF0gPT0gJ3VuZGVmaW5lZCcpIHtcblxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXJzLmxlbmd0aCsrO1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXJzW21hdGNoLnBsYXllcl8xLmlkXSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwbGF5ZXJzW21hdGNoLnBsYXllcl8yLmlkXSA9PSAndW5kZWZpbmVkJykge1xuXG4gICAgICAgICAgICAgICAgICAgIHBsYXllcnMubGVuZ3RoKys7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllcnNbbWF0Y2gucGxheWVyXzIuaWRdID0gMDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlYW1zW21hdGNoLnBsYXllcl8xLnRlYW1faWRdID09ICd1bmRlZmluZWQnKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdGVhbXMubGVuZ3RoKys7XG4gICAgICAgICAgICAgICAgICAgIHRlYW1zW21hdGNoLnBsYXllcl8xLnRlYW1faWRdID0gMDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlYW1zW21hdGNoLnBsYXllcl8yLnRlYW1faWRdID09ICd1bmRlZmluZWQnKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdGVhbXMubGVuZ3RoKys7XG4gICAgICAgICAgICAgICAgICAgIHRlYW1zW21hdGNoLnBsYXllcl8yLnRlYW1faWRdID0gMDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtYXRjaC5wbGF5ZXJfMS5nYW1lcyA9IDA7XG4gICAgICAgICAgICAgICAgbWF0Y2gucGxheWVyXzIuZ2FtZXMgPSAwO1xuICAgICAgICAgICAgICAgIG1hdGNoLndpbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgbWF0Y2guc2NvcmVzID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IgKGdhbWVfaSA9IDA7IGdhbWVfaSA8IHRvdGFsX2dhbWVzOyBnYW1lX2krKykge1xuXG4gICAgICAgICAgICAgICAgICAgIGdhbWUucGxheWVyXzEuJGlucHV0ID0gbWF0Y2gucGxheWVyXzEuJHJvdy5maW5kKCd0ZDplcSgnICsgKGdhbWVfaSArIDEpICsgJykgaW5wdXRbdHlwZT1cIm51bWJlclwiXScpO1xuICAgICAgICAgICAgICAgICAgICBnYW1lLnBsYXllcl8yLiRpbnB1dCA9IG1hdGNoLnBsYXllcl8yLiRyb3cuZmluZCgndGQ6ZXEoJyArIChnYW1lX2kgKyAxKSArICcpIGlucHV0W3R5cGU9XCJudW1iZXJcIl0nKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBQbGF5ZXIgd2lucyBtYXRjaCBieSB3aW5uaW5nIGEgY2VydGFpbiBudW1iZXIgb2YgZ2FtZXNcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoLnBsYXllcl8xLmdhbWVzID49IE1hdGguZmxvb3IodG90YWxfZ2FtZXMgLyAyKSArIDEpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2gud2luID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUucGxheWVyXzEuJGlucHV0LnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lLnBsYXllcl8yLiRpbnB1dC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2gucGxheWVyXzIuZ2FtZXMgPj0gTWF0aC5mbG9vcih0b3RhbF9nYW1lcyAvIDIpICsgMSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaC53aW4gPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5wbGF5ZXJfMS4kaW5wdXQucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUucGxheWVyXzIuJGlucHV0LnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5wbGF5ZXJfMS4kaW5wdXQucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lLnBsYXllcl8yLiRpbnB1dC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGdhbWUucGxheWVyXzEuc2NvcmUgPSBwYXJzZUludChnYW1lLnBsYXllcl8xLiRpbnB1dC52YWwoKSk7XG4gICAgICAgICAgICAgICAgICAgIGdhbWUucGxheWVyXzIuc2NvcmUgPSBwYXJzZUludChnYW1lLnBsYXllcl8yLiRpbnB1dC52YWwoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQXdhcmQgYSBwbGF5ZXIgYSBnYW1lXG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lLnBsYXllcl8xLnNjb3JlID49IDExICYmIChnYW1lLnBsYXllcl8xLnNjb3JlIC0gZ2FtZS5wbGF5ZXJfMi5zY29yZSA+PSAyKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaC5wbGF5ZXJfMS5nYW1lcysrO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZ2FtZS5wbGF5ZXJfMi5zY29yZSA+PSAxMSAmJiAoZ2FtZS5wbGF5ZXJfMi5zY29yZSAtIGdhbWUucGxheWVyXzEuc2NvcmUgPj0gMikpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2gucGxheWVyXzIuZ2FtZXMrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoLnNjb3Jlcy5wdXNoKFtnYW1lLnBsYXllcl8xLnNjb3JlLCBnYW1lLnBsYXllcl8yLnNjb3JlXSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcGxheWVyc1ttYXRjaC5wbGF5ZXJfMS5pZF0gPSBwbGF5ZXJzW21hdGNoLnBsYXllcl8xLmlkXSArIG1hdGNoLnBsYXllcl8xLmdhbWVzO1xuICAgICAgICAgICAgICAgIHBsYXllcnNbbWF0Y2gucGxheWVyXzIuaWRdID0gcGxheWVyc1ttYXRjaC5wbGF5ZXJfMi5pZF0gKyBtYXRjaC5wbGF5ZXJfMi5nYW1lcztcblxuICAgICAgICAgICAgICAgIGlmIChtYXRjaC53aW4pIHtcblxuICAgICAgICAgICAgICAgICAgICB0ZWFtc1ttYXRjaFsncGxheWVyXycgKyBtYXRjaC53aW5dLnRlYW1faWRdID0gdGVhbXNbbWF0Y2hbJ3BsYXllcl8nICsgbWF0Y2gud2luXS50ZWFtX2lkXSArIDE7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKG1hdGNoLnNjb3Jlcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0b3RhbHNcbiAgICAgICAgICAgIGFwaS5zY29yZXMucGxheWVycyA9IHBsYXllcnM7XG4gICAgICAgICAgICBhcGkuc2NvcmVzLnRlYW1zID0gdGVhbXM7XG4gICAgICAgICAgICBhcGkuc2NvcmVzLm1hdGNoZXMgPSBtYXRjaGVzO1xuXG4gICAgICAgICAgICAkLmVhY2gocGxheWVycywgZnVuY3Rpb24gKHBsYXllcl9JRCwgcGxheWVyX3Njb3JlKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAocGxheWVyX0lEID09ICdsZW5ndGgnIHx8ICFwbGF5ZXJfSUQpIHtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBhcGkuJHNjb3Jlc19tb2RhbC5maW5kKCd0Zm9vdCBbZGF0YS1wbGF5ZXItaWQ9XCInICsgcGxheWVyX0lEICsgJ1wiXScpLmh0bWwocGxheWVyX3Njb3JlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkLmVhY2godGVhbXMsIGZ1bmN0aW9uICh0ZWFtX0lELCB0ZWFtX3Njb3JlKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAodGVhbV9JRCA9PSAnbGVuZ3RoJyB8fCAhdGVhbV9JRCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGFwaS4kc2NvcmVzX21vZGFsLmZpbmQoJ3Rmb290IFtkYXRhLXRlYW0taWQ9XCInICsgdGVhbV9JRCArICdcIl0nKS5odG1sKHRlYW1fc2NvcmUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNhdmVzIHRoZSBzY29yZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzaW5jZSB7e1ZFUlNJT059fVxuICAgICAgICAgKi9cbiAgICAgICAgc2NvcmVzX21vZGFsX3N1Ym1pdDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBpZiAoIWNvbmZpcm0obDEwblsnY29uZmlybV9zdWJtaXRfbWF0Y2gnXSkpIHtcblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJC5wb3N0KFxuICAgICAgICAgICAgICAgIGFqYXh1cmwsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdwaW5ncG9uZ19zdWJtaXRfc2NvcmVzJyxcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hfSUQ6IGRhdGEubWF0Y2hfSUQsXG4gICAgICAgICAgICAgICAgICAgIHNjb3JlczogYXBpLnNjb3Jlc1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXNwb25zZS5zdWNjZXNzID09ICd1bmRlZmluZWQnIHx8ICFyZXNwb25zZS5zdWNjZXNzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGwxMG5bJ2NvdWxkX25vdF9zYXZlX21hdGNoJ10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gcmVzcG9uc2UuZGF0YS5yZWRpcmVjdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8vKipcbiAgICAgICAgLy8gKiBGaXJlcyB3aGVuIHNlbGVjdGluZyBhIHBsYXllci5cbiAgICAgICAgLy8gKlxuICAgICAgICAvLyAqIFByZXZlbnRzIGR1cGxpY2F0ZSBwbGF5ZXIgc2VsZWN0cyB3aXRoaW4gcGxheWVyIGdyb3Vwcy5cbiAgICAgICAgLy8gKlxuICAgICAgICAvLyAqIEBzaW5jZSB7e1ZFUlNJT059fVxuICAgICAgICAvLyAqL1xuICAgICAgICAvL3BsYXllcl9zZWxlY3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgdmFyIHBsYXllciA9ICQodGhpcykudmFsKCksXG4gICAgICAgIC8vICAgICAgICAkcGxheWVyX3NlbGVjdF9hY3RpdmUgPSAkKHRoaXMpLmNsb3Nlc3QoJy5wbGF5ZXItc2VsZWN0JyksXG4gICAgICAgIC8vICAgICAgICBwcmV2aW91c19wbGF5ZXIgPSAkcGxheWVyX3NlbGVjdF9hY3RpdmUuYXR0cignZGF0YS1hY3RpdmUnKSxcbiAgICAgICAgLy8gICAgICAgICRwbGF5ZXJfc2VsZWN0X2dyb3VwID0gJCh0aGlzKS5jbG9zZXN0KCcucGxheWVyLXNlbGVjdC1ncm91cCcpLFxuICAgICAgICAvLyAgICAgICAgJHBsYXllcl9zZWxlY3RzID0gJHBsYXllcl9zZWxlY3RfZ3JvdXAuZmluZCgnLnBsYXllci1zZWxlY3QnKS5ub3QoJHBsYXllcl9zZWxlY3RfYWN0aXZlKTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgaWYgKHByZXZpb3VzX3BsYXllcikge1xuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgICAgJHBsYXllcl9zZWxlY3RzLmZpbmQoJ29wdGlvblt2YWx1ZT1cIicgKyBwcmV2aW91c19wbGF5ZXIgKyAnXCJdJykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgIC8vICAgIH1cbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgaWYgKHBsYXllcikge1xuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgICAgJHBsYXllcl9zZWxlY3RfYWN0aXZlLmF0dHIoJ2RhdGEtYWN0aXZlJywgcGxheWVyKTtcbiAgICAgICAgLy8gICAgICAgICRwbGF5ZXJfc2VsZWN0cy5maW5kKCdvcHRpb25bdmFsdWU9XCInICsgcGxheWVyICsgJ1wiXScpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgIH0gZWxzZSB7XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgICAgICAkcGxheWVyX3NlbGVjdF9hY3RpdmUucmVtb3ZlQXR0cignZGF0YS1hY3RpdmUnKTtcbiAgICAgICAgLy8gICAgfVxuICAgICAgICAvL31cbiAgICB9XG5cbiAgICAkKGFwaS5pbml0KTtcbn0pKGpRdWVyeSlcbnZhciBQaW5nUG9uZ19BZG1pbl9NYXRjaENQVHNcbihmdW5jdGlvbiAoJCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBkYXRhID0ge30sIGwxMG4gPSB7fTtcblxuICAgIGlmICh0eXBlb2YgUGluZ1BvbmdfQWRtaW4gIT0gJ3VuZGVmaW5lZCcpIHtcblxuICAgICAgICBkYXRhID0gUGluZ1BvbmdfQWRtaW47XG4gICAgICAgIGwxMG4gPSB0eXBlb2YgUGluZ1BvbmdfQWRtaW4ubDEwbiAhPSAndW5kZWZpbmVkJyA/IFBpbmdQb25nX0FkbWluLmwxMG4gOiB7fTtcbiAgICB9XG5cbiAgICB2YXIgYXBpID0gUGluZ1BvbmdfQWRtaW5fTWF0Y2hDUFRzID0ge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHYW1lcyB0YWJsZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHNpbmNlIHt7VkVSU0lPTn19XG4gICAgICAgICAqL1xuICAgICAgICAkZ2FtZXM6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXRpYWxpemVzIHRoZSBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzaW5jZSB7e1ZFUlNJT059fVxuICAgICAgICAgKi9cbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBhcGkuZ2V0X2VsZW1lbnRzKCk7XG4gICAgICAgICAgICBhcGkuc2V0dXBfaGFuZGxlcnMoKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyBhbGwgalF1ZXJ5IGVsZW1lbnRzIG5lZWRlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHNpbmNlIHt7VkVSU0lPTn19XG4gICAgICAgICAqL1xuICAgICAgICBnZXRfZWxlbWVudHM6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgYXBpLiRnYW1lcyA9ICQoJyNwaW5ncG9uZy13b24tZ2FtZXMnKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB1cCBoYW5kbGVycyBvbiBldmVudHMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzaW5jZSB7e1ZFUlNJT059fVxuICAgICAgICAgKi9cbiAgICAgICAgc2V0dXBfaGFuZGxlcnM6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLWV4cGFuZC1nYW1lc10nLCBhcGkudG9nZ2xlX2dhbWVzKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogSGlkZXMgb3Igc2hvd3MgZ2FtZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzaW5jZSB7e1ZFUlNJT059fVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gZVxuICAgICAgICAgKi9cbiAgICAgICAgdG9nZ2xlX2dhbWVzOiBmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgICAgICB2YXIgaGlkZSA9IGFwaS4kZ2FtZXMuaXMoJzp2aXNpYmxlJyk7XG5cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgaWYgKGhpZGUpIHtcblxuICAgICAgICAgICAgICAgICQodGhpcykuaHRtbChsMTBuWyd2aWV3X21hdGNoZXMnXSk7XG4gICAgICAgICAgICAgICAgYXBpLmhpZGVfZ2FtZXMoKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICQodGhpcykuaHRtbChsMTBuWydoaWRlX21hdGNoZXMnXSk7XG4gICAgICAgICAgICAgICAgYXBpLmV4cGFuZF9nYW1lcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaG93cyBnYW1lcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHNpbmNlIHt7VkVSU0lPTn19XG4gICAgICAgICAqL1xuICAgICAgICBleHBhbmRfZ2FtZXM6IGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgICAgIGFwaS4kZ2FtZXMuc2hvdygpO1xuICAgICAgICB9LFxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhpZGVzIGdhbWVzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc2luY2Uge3tWRVJTSU9OfX1cbiAgICAgICAgICovXG4gICAgICAgIGhpZGVfZ2FtZXM6IGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgICAgIGFwaS4kZ2FtZXMuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgJChhcGkuaW5pdCk7XG59KShqUXVlcnkpIl19
